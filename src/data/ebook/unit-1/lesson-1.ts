// الوحدة الأولى - الدرس الأول: الزخم الخطي والدفع
// محتوى مفصل بترتيب الكتاب المدرسي

import type { Lesson, Topic, FlashCard, LifeTechConnection, Experiment } from '../types';

// ═══════════════════════════════════════════════════════════════
// المواضيع
// ═══════════════════════════════════════════════════════════════

const topics: Topic[] = [
    {
        id: 'momentum-concept',
        number: '1.1',
        title: 'مفهوم الزخم الخطي',
        content: `
الزخم الخطي هو كمية فيزيائية تصف حالة حركة الجسم. يُعرّف بأنه حاصل ضرب كتلة الجسم في سرعته المتجهة.

عندما نقول أن جسماً له زخم كبير، فهذا يعني أنه يصعب إيقافه أو تغيير حالة حركته. فكر في الفرق بين إيقاف كرة بينغ بونغ وإيقاف سيارة متحركة!

الزخم الخطي كمية متجهة، واتجاهه هو نفس اتجاه السرعة المتجهة للجسم.
    `,
        keyPoints: [
            'الزخم = الكتلة × السرعة',
            'الزخم كمية متجهة (لها مقدار واتجاه)',
            'اتجاه الزخم = اتجاه السرعة',
            'الزخم يعبر عن صعوبة إيقاف الجسم',
        ],
        formulas: [
            {
                id: 'momentum-formula',
                name: 'قانون الزخم الخطي',
                latex: '\\vec{p} = m \\cdot \\vec{v}',
                description: 'الزخم الخطي يساوي حاصل ضرب الكتلة في السرعة المتجهة',
                variables: [
                    { symbol: 'p', meaning: 'الزخم الخطي', unit: 'kg·m/s' },
                    { symbol: 'm', meaning: 'الكتلة', unit: 'kg' },
                    { symbol: 'v', meaning: 'السرعة المتجهة', unit: 'm/s' },
                ],
            },
        ],
        examples: [
            {
                id: 'ex1-1-1',
                title: 'حساب زخم سيارة',
                question: 'سيارة كتلتها 1200 kg تتحرك بسرعة 25 m/s شرقاً. احسب زخمها الخطي.',
                given: ['m = 1200 kg', 'v = 25 m/s شرقاً'],
                required: 'الزخم الخطي p',
                solution: [
                    { step: 1, text: 'نطبق قانون الزخم:', formula: 'p = m \\times v' },
                    { step: 2, text: 'نعوض القيم:', formula: 'p = 1200 \\times 25' },
                    { step: 3, text: 'نحسب النتيجة:', formula: 'p = 30000 \\text{ kg·m/s}' },
                ],
                answer: '30000 kg·m/s شرقاً',
                source: 'textbook',
            },
            {
                id: 'ex1-1-2',
                title: 'مقارنة زخم جسمين',
                question: 'شاحنة كتلتها 5000 kg تتحرك بسرعة 10 m/s، وسيارة كتلتها 1000 kg تتحرك بسرعة 40 m/s. أيهما أكبر زخماً؟',
                given: ['الشاحنة: m₁ = 5000 kg, v₁ = 10 m/s', 'السيارة: m₂ = 1000 kg, v₂ = 40 m/s'],
                required: 'مقارنة الزخمين',
                solution: [
                    { step: 1, text: 'زخم الشاحنة:', formula: 'p_1 = 5000 \\times 10 = 50000 \\text{ kg·m/s}' },
                    { step: 2, text: 'زخم السيارة:', formula: 'p_2 = 1000 \\times 40 = 40000 \\text{ kg·m/s}' },
                    { step: 3, text: 'المقارنة: p₁ > p₂' },
                ],
                answer: 'زخم الشاحنة أكبر رغم أن سرعتها أقل',
                source: 'textbook',
            },
        ],
        notes: [
            'وحدة الزخم في النظام الدولي: kg·m/s أو N·s',
            'كلتا الوحدتين متكافئتان',
        ],
    },
    {
        id: 'momentum-change',
        number: '1.2',
        title: 'التغير في الزخم ومعدل التغير',
        content: `
عندما تتغير سرعة جسم (أو كتلته)، يتغير زخمه. التغير في الزخم هو الفرق بين الزخم النهائي والزخم الابتدائي.

معدل التغير في الزخم هو مقدار التغير مقسوماً على الزمن الذي حدث فيه هذا التغير.
    `,
        keyPoints: [
            'التغير في الزخم = الزخم النهائي - الزخم الابتدائي',
            'معدل التغير في الزخم = التغير في الزخم ÷ الزمن',
            'معدل التغير في الزخم يساوي محصلة القوى المؤثرة',
        ],
        formulas: [
            {
                id: 'delta-p',
                name: 'التغير في الزخم',
                latex: '\\Delta p = p_f - p_i = m(v_f - v_i)',
                description: 'التغير في الزخم يساوي الفرق بين الزخم النهائي والابتدائي',
                variables: [
                    { symbol: 'Δp', meaning: 'التغير في الزخم', unit: 'kg·m/s' },
                    { symbol: 'p_f', meaning: 'الزخم النهائي', unit: 'kg·m/s' },
                    { symbol: 'p_i', meaning: 'الزخم الابتدائي', unit: 'kg·m/s' },
                ],
            },
        ],
        examples: [
            {
                id: 'ex1-2-1',
                title: 'حساب التغير في الزخم',
                question: 'جسم كتلته 2 kg كانت سرعته 5 m/s وأصبحت 15 m/s. احسب التغير في زخمه.',
                given: ['m = 2 kg', 'vᵢ = 5 m/s', 'v_f = 15 m/s'],
                required: 'التغير في الزخم Δp',
                solution: [
                    { step: 1, text: 'نطبق قانون التغير في الزخم:', formula: '\\Delta p = m(v_f - v_i)' },
                    { step: 2, text: 'نعوض القيم:', formula: '\\Delta p = 2(15 - 5)' },
                    { step: 3, text: 'نحسب:', formula: '\\Delta p = 2 \\times 10 = 20 \\text{ kg·m/s}' },
                ],
                answer: '20 kg·m/s',
                source: 'textbook',
            },
        ],
    },
    {
        id: 'newton-second-momentum',
        number: '1.3',
        title: 'قانون نيوتن الثاني بصيغة الزخم',
        content: `
قانون نيوتن الثاني يمكن صياغته بدلالة الزخم: محصلة القوى المؤثرة على جسم تساوي معدل التغير في زخمه.

هذه الصيغة أعم من الصيغة التقليدية (F = ma) لأنها تطبق حتى عندما تتغير الكتلة (مثل الصواريخ).
    `,
        keyPoints: [
            'القوة = معدل التغير في الزخم',
            'هذه الصيغة أعم من F = ma',
            'تستخدم عندما تتغير الكتلة',
        ],
        formulas: [
            {
                id: 'newton-2-momentum',
                name: 'قانون نيوتن الثاني (صيغة الزخم)',
                latex: '\\Sigma \\vec{F} = \\frac{\\Delta \\vec{p}}{\\Delta t}',
                description: 'محصلة القوى = معدل التغير في الزخم',
                variables: [
                    { symbol: 'ΣF', meaning: 'محصلة القوى', unit: 'N' },
                    { symbol: 'Δp', meaning: 'التغير في الزخم', unit: 'kg·m/s' },
                    { symbol: 'Δt', meaning: 'الفترة الزمنية', unit: 's' },
                ],
            },
        ],
    },
    {
        id: 'impulse',
        number: '1.4',
        title: 'الدفع والعلاقة مع الزخم',
        content: `
الدفع هو تأثير قوة على جسم خلال فترة زمنية. يُعرّف بأنه حاصل ضرب القوة في الزمن.

نظرية الدفع-الزخم: الدفع المؤثر على جسم يساوي التغير في زخمه.

هذه العلاقة مهمة جداً في فهم التصادمات وتصميم أنظمة السلامة.
    `,
        keyPoints: [
            'الدفع = القوة × الزمن',
            'الدفع = التغير في الزخم',
            'الدفع كمية متجهة بنفس اتجاه القوة',
            'وحدة الدفع: N·s أو kg·m/s',
        ],
        formulas: [
            {
                id: 'impulse-def',
                name: 'تعريف الدفع',
                latex: '\\vec{J} = \\vec{F} \\cdot \\Delta t',
                description: 'الدفع يساوي القوة مضروبة في الزمن',
                variables: [
                    { symbol: 'J', meaning: 'الدفع', unit: 'N·s' },
                    { symbol: 'F', meaning: 'القوة', unit: 'N' },
                    { symbol: 'Δt', meaning: 'الفترة الزمنية', unit: 's' },
                ],
            },
            {
                id: 'impulse-momentum',
                name: 'نظرية الدفع-الزخم',
                latex: '\\vec{J} = \\Delta \\vec{p} = m(\\vec{v}_f - \\vec{v}_i)',
                description: 'الدفع يساوي التغير في الزخم',
                variables: [
                    { symbol: 'J', meaning: 'الدفع', unit: 'N·s' },
                    { symbol: 'Δp', meaning: 'التغير في الزخم', unit: 'kg·m/s' },
                ],
            },
        ],
        examples: [
            {
                id: 'ex1-4-1',
                title: 'حساب الدفع والقوة',
                question: 'كرة كتلتها 0.5 kg تتحرك بسرعة 20 m/s اصطدمت بحائط وارتدت بسرعة 15 m/s. إذا كان زمن التلامس 0.01 s، احسب الدفع ومتوسط القوة.',
                given: ['m = 0.5 kg', 'vᵢ = +20 m/s', 'v_f = -15 m/s', 'Δt = 0.01 s'],
                required: 'الدفع J والقوة F',
                solution: [
                    { step: 1, text: 'الدفع = التغير في الزخم:', formula: 'J = m(v_f - v_i)' },
                    { step: 2, text: 'نعوض:', formula: 'J = 0.5(-15 - 20) = 0.5 \\times (-35)' },
                    { step: 3, text: 'الدفع:', formula: 'J = -17.5 \\text{ N·s}' },
                    { step: 4, text: 'القوة:', formula: 'F = \\frac{J}{\\Delta t} = \\frac{-17.5}{0.01} = -1750 \\text{ N}' },
                ],
                answer: 'الدفع = 17.5 N·s، القوة = 1750 N (بعكس الحركة الابتدائية)',
                source: 'textbook',
            },
        ],
    },
    {
        id: 'force-time-graph',
        number: '1.5',
        title: 'منحنى القوة-الزمن',
        content: `
في كثير من الحالات العملية، القوة لا تكون ثابتة بل تتغير مع الزمن. في هذه الحالة:

الدفع = المساحة تحت منحنى القوة-الزمن

إذا كان المنحنى خطاً مستقيماً أفقياً (قوة ثابتة)، تكون المساحة مستطيلاً.
إذا كان المنحنى مثلثاً، نحسب مساحة المثلث.
    `,
        keyPoints: [
            'الدفع = المساحة تحت منحنى F-t',
            'للقوة الثابتة: J = F × Δt (مساحة مستطيل)',
            'للقوة المتغيرة خطياً: J = ½ × القاعدة × الارتفاع',
        ],
        formulas: [
            {
                id: 'area-integral',
                name: 'الدفع من المنحنى',
                latex: 'J = \\int F \\, dt = \\text{المساحة تحت المنحنى}',
                description: 'الدفع يساوي المساحة المحصورة تحت منحنى القوة-الزمن',
                variables: [],
            },
        ],
    },
    {
        id: 'conservation-momentum',
        number: '1.6',
        title: 'قانون حفظ الزخم',
        content: `
في النظام المعزول (محصلة القوى الخارجية = صفر)، يبقى الزخم الكلي للنظام ثابتاً.

هذا يعني أن مجموع زخم الأجسام قبل التفاعل (تصادم أو انفجار) يساوي مجموعها بعد التفاعل.

قانون حفظ الزخم مشتق من قانون نيوتن الثالث: لكل فعل رد فعل مساوٍ في المقدار ومعاكس في الاتجاه.
    `,
        keyPoints: [
            'في النظام المعزول: الزخم الكلي ثابت',
            'مجموع الزخم قبل = مجموع الزخم بعد',
            'يطبق على التصادمات والانفجارات',
            'مشتق من قانون نيوتن الثالث',
        ],
        formulas: [
            {
                id: 'conservation',
                name: 'قانون حفظ الزخم',
                latex: '\\sum \\vec{p}_{\\text{قبل}} = \\sum \\vec{p}_{\\text{بعد}}',
                description: 'مجموع الزخم قبل التفاعل = مجموعه بعد التفاعل',
                variables: [],
            },
            {
                id: 'two-body-conservation',
                name: 'حفظ الزخم لجسمين',
                latex: 'm_1 v_{1i} + m_2 v_{2i} = m_1 v_{1f} + m_2 v_{2f}',
                description: 'صيغة حفظ الزخم لنظام من جسمين',
                variables: [
                    { symbol: 'm₁, m₂', meaning: 'كتلتا الجسمين', unit: 'kg' },
                    { symbol: 'v_{1i}, v_{2i}', meaning: 'السرعتان الابتدائيتان', unit: 'm/s' },
                    { symbol: 'v_{1f}, v_{2f}', meaning: 'السرعتان النهائيتان', unit: 'm/s' },
                ],
            },
        ],
        examples: [
            {
                id: 'ex1-6-1',
                title: 'تصادم والتحام',
                question: 'عربة كتلتها 3 kg تتحرك بسرعة 4 m/s اصطدمت بعربة ساكنة كتلتها 1 kg والتحمتا. ما سرعتهما بعد الالتحام؟',
                given: ['m₁ = 3 kg, v₁ᵢ = 4 m/s', 'm₂ = 1 kg, v₂ᵢ = 0'],
                required: 'السرعة المشتركة v_f',
                solution: [
                    { step: 1, text: 'نطبق حفظ الزخم:', formula: 'm_1 v_{1i} + m_2 v_{2i} = (m_1 + m_2) v_f' },
                    { step: 2, text: 'نعوض:', formula: '3(4) + 1(0) = (3 + 1) v_f' },
                    { step: 3, text: 'نحل:', formula: '12 = 4 v_f \\Rightarrow v_f = 3 \\text{ m/s}' },
                ],
                answer: '3 m/s',
                source: 'textbook',
            },
            {
                id: 'ex1-6-2',
                title: 'ارتداد البندقية',
                question: 'بندقية كتلتها 4 kg تطلق رصاصة كتلتها 0.02 kg بسرعة 400 m/s. ما سرعة ارتداد البندقية؟',
                given: ['M = 4 kg (البندقية)', 'm = 0.02 kg (الرصاصة)', 'v = 400 m/s (سرعة الرصاصة)'],
                required: 'سرعة ارتداد البندقية V',
                solution: [
                    { step: 1, text: 'قبل الإطلاق: الزخم الكلي = صفر (كلاهما ساكن)' },
                    { step: 2, text: 'بعد الإطلاق:', formula: '0 = mv + MV' },
                    { step: 3, text: 'نحل:', formula: 'V = -\\frac{mv}{M} = -\\frac{0.02 \\times 400}{4} = -2 \\text{ m/s}' },
                ],
                answer: '-2 m/s (الإشارة السالبة تعني ارتداد بعكس اتجاه الرصاصة)',
                source: 'textbook',
            },
        ],
    },
];

// ═══════════════════════════════════════════════════════════════
// الربط بالحياة والتكنولوجيا
// ═══════════════════════════════════════════════════════════════

const lifeTechConnections: LifeTechConnection[] = [
    {
        id: 'airbag',
        title: 'الوسائد الهوائية في السيارات',
        description: 'تستخدم الوسائد الهوائية مبدأ الدفع والزخم لحماية الركاب عند التصادم.',
        physicsExplanation: 'عند التصادم، التغير في الزخم ثابت (الراكب يتوقف من سرعة السيارة إلى الصفر). الوسادة الهوائية تزيد زمن التوقف، وبالتالي تقلل القوة المؤثرة على الراكب. من العلاقة F = Δp/Δt، عندما يزيد Δt تقل F.',
        realWorldExamples: [
            'تنتفخ الوسادة خلال 30 ميلي ثانية فقط',
            'تقلل القوة على الرأس بنسبة تصل إلى 90%',
            'السيارات الحديثة تحتوي 6-8 وسائد هوائية',
        ],
    },
    {
        id: 'seatbelt',
        title: 'أحزمة الأمان',
        description: 'حزام الأمان يعمل بنفس مبدأ الوسادة الهوائية: زيادة زمن التوقف لتقليل القوة.',
        physicsExplanation: 'بدون الحزام، يتوقف الراكب فجأة عند اصطدامه بالمقود أو الزجاج (زمن قصير جداً = قوة كبيرة جداً). الحزام يوزع القوة على مساحة أكبر ويزيد زمن التوقف.',
        realWorldExamples: [
            'الحزام يمتد قليلاً عند التصادم الشديد',
            'يقلل احتمالية الإصابة القاتلة بنسبة 45%',
        ],
    },
    {
        id: 'rocket',
        title: 'الصواريخ والمركبات الفضائية',
        description: 'الصواريخ تعمل بمبدأ حفظ الزخم: قذف الغازات للخلف يدفع الصاروخ للأمام.',
        physicsExplanation: 'الصاروخ يقذف غازات الاحتراق بسرعة عالية للخلف. من قانون حفظ الزخم، يكتسب الصاروخ زخماً مساوياً ومعاكساً، فيتحرك للأمام.',
        realWorldExamples: [
            'محركات أيون تقذف أيونات بسرعة 30 km/s',
            'صاروخ ساتورن 5 كان يحرق 13 طن وقود/ثانية',
        ],
    },
];

// ═══════════════════════════════════════════════════════════════
// التجربة
// ═══════════════════════════════════════════════════════════════

const experiments: Experiment[] = [
    {
        id: 'momentum-collision-exp',
        title: 'دراسة التصادمات وحفظ الزخم',
        objective: 'التحقق من قانون حفظ الزخم في التصادمات',
        materials: [
            'مسار هوائي أو سكة ملساء',
            'عربتان متماثلتان',
            'بوابات ضوئية وموقتات',
            'أثقال إضافية',
            'شريط لاصق أو مغناطيس (للالتحام)',
        ],
        procedure: [
            'ثبت المسار الهوائي أفقياً',
            'ضع العربة الثانية ساكنة في منتصف المسار',
            'أعطِ العربة الأولى دفعة لتمر عبر البوابة الأولى',
            'سجل سرعة العربة الأولى قبل التصادم',
            'سجل سرعتي العربتين بعد التصادم',
            'كرر التجربة مع كتل مختلفة',
        ],
        observations: [
            'سرعة العربة الأولى قبل التصادم',
            'سرعتي العربتين بعد التصادم',
            'اتجاه حركة كل عربة بعد التصادم',
        ],
        analysis: 'احسب الزخم الكلي قبل وبعد التصادم. قارن بين القيمتين. احسب نسبة الخطأ.',
        conclusion: 'الزخم الكلي للنظام محفوظ في التصادمات (مع مراعاة أخطاء القياس).',
        safetyNotes: [
            'لا توجه العربات نحو وجهك',
            'تأكد من استقرار المسار',
        ],
    },
];

// ═══════════════════════════════════════════════════════════════
// بطاقات الذاكرة (Flash Cards)
// ═══════════════════════════════════════════════════════════════

const flashcards: FlashCard[] = [
    // تعريفات
    { id: 'fc1', front: 'ما هو الزخم الخطي؟', back: 'حاصل ضرب كتلة الجسم في سرعته المتجهة', category: 'definition' },
    { id: 'fc2', front: 'ما هو الدفع؟', back: 'حاصل ضرب القوة في الزمن، أو التغير في الزخم', category: 'definition' },
    { id: 'fc3', front: 'ما هو النظام المعزول؟', back: 'نظام محصلة القوى الخارجية عليه = صفر', category: 'definition' },

    // قوانين
    { id: 'fc4', front: 'قانون الزخم الخطي', back: '$p = m \\times v$', category: 'formula' },
    { id: 'fc5', front: 'نظرية الدفع-الزخم', back: '$J = \\Delta p = F \\times \\Delta t$', category: 'formula' },
    { id: 'fc6', front: 'قانون حفظ الزخم', back: '$\\sum p_{قبل} = \\sum p_{بعد}$', category: 'formula' },
    { id: 'fc7', front: 'قانون نيوتن الثاني بصيغة الزخم', back: '$F = \\frac{\\Delta p}{\\Delta t}$', category: 'formula' },

    // وحدات
    { id: 'fc8', front: 'وحدة الزخم', back: '$\\text{kg} \\cdot \\text{m/s}$ أو $\\text{N} \\cdot \\text{s}$', category: 'unit' },
    { id: 'fc9', front: 'وحدة الدفع', back: '$\\text{N} \\cdot \\text{s}$ أو $\\text{kg} \\cdot \\text{m/s}$', category: 'unit' },

    // مفاهيم
    { id: 'fc10', front: 'هل الزخم كمية قياسية أم متجهة؟', back: 'كمية متجهة (لها مقدار واتجاه)', category: 'concept' },
    { id: 'fc11', front: 'ما اتجاه الزخم؟', back: 'نفس اتجاه السرعة', category: 'concept' },
    { id: 'fc12', front: 'كيف تقلل الوسادة الهوائية الإصابة؟', back: 'تزيد زمن التصادم فتقل القوة', category: 'concept' },
    { id: 'fc13', front: 'لماذا ترتد البندقية للخلف عند الإطلاق؟', back: 'بسبب حفظ الزخم: زخم الرصاصة للأمام = زخم البندقية للخلف', category: 'concept' },
];

// ═══════════════════════════════════════════════════════════════
// ألعاب تعليمية
// ═══════════════════════════════════════════════════════════════

const matchingGame = [
    { id: '1', term: 'الزخم الخطي', definition: '$p = mv$' },
    { id: '2', term: 'الدفع', definition: '$J = F \\cdot \\Delta t$' },
    { id: '3', term: 'وحدة الزخم', definition: '$\\text{kg} \\cdot \\text{m/s}$' },
    { id: '4', term: 'التغير في الزخم', definition: '$\\Delta p = p_f - p_i$' },
    { id: '5', term: 'قانون حفظ الزخم', definition: 'النظام المعزول' },
];

const fillBlanksGame = [
    { id: 'fb1', sentence: 'الزخم الخطي يساوي ___ مضروبة في السرعة', answer: 'الكتلة', options: ['الكتلة', 'القوة', 'الزمن', 'التسارع'] },
    { id: 'fb2', sentence: 'وحدة الزخم هي ___ في النظام الدولي', answer: 'kg·m/s', options: ['kg·m/s', 'm/s²', 'N/m', 'J'] },
    { id: 'fb3', sentence: 'الدفع = التغير في ___', answer: 'الزخم', options: ['الزخم', 'السرعة', 'الكتلة', 'القوة'] },
    { id: 'fb4', sentence: 'الوسادة الهوائية تزيد ___ لتقلل القوة', answer: 'الزمن', options: ['الزمن', 'السرعة', 'الكتلة', 'المسافة'] },
    { id: 'fb5', sentence: 'في النظام المعزول، الزخم الكلي ___', answer: 'ثابت', options: ['ثابت', 'يزيد', 'يقل', 'صفر دائماً'] },
];

// ═══════════════════════════════════════════════════════════════
// تصدير الدرس الأول
// ═══════════════════════════════════════════════════════════════

export const lesson1: Lesson = {
    id: 'lesson-1-momentum-impulse',
    number: 1,
    title: 'Linear Momentum and Impulse',
    titleAr: 'الزخم الخطي والدفع',
    duration: 90,
    topics,
    lifeTech: lifeTechConnections,
    experiments,
    flashcards,
    games: [
        ...matchingGame.map(g => ({ ...g, type: 'matching' as const, question: g.term, correctAnswer: g.definition })),
        ...fillBlanksGame.map(g => ({ ...g, type: 'fill-blank' as const, correctAnswer: g.answer })),
    ],
};
